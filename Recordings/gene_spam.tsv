start	end	text
0	7000	It's the MCM syndrome that I recommend, it's, you know, tells you everything you want to know about spam.
7000	13000	And surprisingly, 20 years, not many things change about spam.
13000	20000	But, so why the parallel? Well, spam is annoying, right? This spam.
20000	26000	And so is the email spam or electronic spam. So that's where the analogy comes from.
26000	33000	I do some stats. I didn't, like, double check them, but I think they're reasonably accurate.
33000	38000	So, number of, like, email versus spam, right?
38000	42000	So you see the bars, the total bars represent total email spam.
42000	48000	The red part is the percentage of spam. I'm sorry. Total email, percentage of spam.
48000	55000	From this six-year period, ending in 2022, my guess is it hasn't changed very much.
55000	62000	It probably continued along the same line up to 20, 25.
62000	68000	Interestingly, more spam was sent as a percentage of all emails, like, six years ago.
68000	72000	And then it kind of sort of levels off, you know, right?
72000	78000	But it's still impressive, right? If you haven't seen this, it is impressive.
78000	84000	Email is still, right? Maybe not so much, you think, for your generation because you've never really worked outside.
84000	87000	Or many of you haven't really worked in real jobs.
87000	95000	But once you get a real job, yes, people use Slack and, you know, some other versions thereof and wikis and God knows what else.
95000	99000	But email is still there and it has no signs of going away.
99000	103000	So I predict email is not going to go away for at least a decade.
103000	106000	It's for the time it is here to stay.
106000	114000	So, an enlarged percentage of it is spam.
114000	117000	Spam is not only email-based.
117000	121000	You may have received robocalls, right? That's spam.
121000	124000	That's just another version of spam.
124000	127000	Text messages? Yes? Text?
127000	129000	A lot of SMS.
129000	131000	Sometimes WhatsApp, right?
131000	134000	Well, I get WhatsApp spam.
134000	136000	Not a lot, but I get it.
136000	138000	Like, once every couple of weeks.
138000	142000	SMS, I get once every couple of days.
142000	148000	Some of these I don't see because it's already, like, filtered.
148000	156000	Never have I ever received spam on Signal.
156000	158000	Anybody use Signal?
158000	160000	Highly recommended.
160000	162000	For secure messaging.
162000	163000	Okay?
163000	166000	If you want to be secure, do not use Telegram.
166000	168000	That's slimy through and through.
168000	169000	Okay?
169000	170000	Do not.
170000	173000	Unless you want the FBI to knock on your door.
173000	174000	No, seriously.
174000	176000	Do not use Telegram.
176000	177000	SMS.
177000	179000	Just assume everybody reads it.
179000	180000	Okay?
180000	182000	Just assume that it's not private.
182000	183000	WhatsApp?
183000	184000	Eh...
184000	185000	Meta.
185000	186000	Do you trust Mark?
186000	187000	Exactly.
187000	190000	Have you looked at him?
190000	192000	I don't trust Mark.
192000	193000	Signal.
193000	195000	Public domain.
195000	196000	Okay.
196000	199000	So, you can look at the code.
199000	200000	Eh...
200000	203000	I trust Signal more than others.
203000	206000	Not that I trust it, but I trust that I did more than others.
206000	211000	So, if I had to, like, send something securely today, I would do Signal, I might actually split
211000	216000	the message in two parts and send something by a signal and something by WhatsApp.
216000	218000	Are you getting what I'm saying?
218000	219000	Right?
219000	220000	Okay.
220000	221000	Yeah?
221000	222000	But I message is distinct, right?
222000	223000	Right?
223000	227000	I message is distinct, but I message is like a stupid overlay.
227000	228000	Right?
228000	234000	So, I message works for Macs and iPhones.
234000	235000	What about the rest of it?
235000	240000	It's a stupid walled garden religion that Apple imposed on us.
240000	241000	Right?
241000	248000	So, yes, iMessage, if you live entirely within Apple universe, iMessage is okay.
248000	256000	But the problem is, many of us, maybe not you all, but many of us people who use Apple
256000	260000	products communicate with non-Apple users.
260000	267000	And you don't often pay attention or know that your text message isn't an iMessage, but
267000	269000	goes out of the Apple universe.
269000	275000	And the moment it goes out of the Apple universe, it no longer has that security.
275000	282000	So, and then, so text messages and messaging apps, you know, have a lot that can present.
282000	285000	Phone calls, yeah?
285000	291000	If your phone number is somewhere, chances are, you know, you will get text spam.
291000	296000	I'm sorry, phone spam by robocalls, sometimes by live people, but that's, that's like not
296000	297000	really spam.
297000	298000	I mean, it's annoying.
298000	307000	And then email is, uh, the lion's share of, of spam is 50% or so.
307000	310000	So, this is a disturbing thing.
310000	314000	So this is, a graph is kind of hard to read.
314000	316000	Uh, so look at the red part.
316000	319000	It just claims, again, I didn't double verify it.
319000	323000	It seems reasonably credible.
323000	332000	Number of people who lost money due to like scams, spam based scams.
332000	338000	So we're talking here from under 20 million in 2014, all the way to what?
338000	341000	close to 60 million in 2024.
341000	346000	Now, I believe that this is cumulative.
346000	350000	So it's not like 2024, 60 million lost.
350000	356000	It's all these other accumulated stuff that, by 2024, 60 million lost money.
356000	361000	I think that it's not, I don't believe this is a discreet per year.
361000	364000	Although there's a dip here, but I don't, I don't.
364000	366000	There's a dip here, but I don't believe it.
366000	368000	They recovered their money.
368000	369000	Some probably did.
369000	371000	I would say very small percentage.
371000	372000	Very small.
372000	379000	What looks more is, uh, credible is, uh, the yellow part of the graph that shows the average,
379000	381000	uh, money per person lost.
381000	388000	You know, and these, uh, when it, when this talks about, uh, scam calls, it talks about also
388000	389000	email, right?
389000	390000	So it includes email.
390000	395000	So things like, oh, you know, we, here's a bill for, I don't know, Norton defender.
395000	400000	Or here's a thank you for your purchase of Adobe creative cloud.
400000	401000	Right.
401000	402000	You've seen those emails, right?
402000	407000	They say, and here's the bill, or we charged your card or something like that.
407000	408000	Right.
408000	409000	And you call the number.
409000	416000	Somebody does, maybe a relative or a friend, and, uh, they give up their password because
416000	417000	they're tricked.
417000	419000	They lose the money.
419000	424000	Typically these types of scams do not result in like emptying of bank accounts because banks
424000	429000	often have some safeguards in place, but, uh, people do lose money and no longer.
429000	434000	Uh, subjects.
434000	436000	What kind of subjects?
436000	439000	Well, it's no longer like Nigerian princes, right?
439000	440000	Right.
440000	444000	Or Malaysian, uh, multi-billionaires, right?
444000	449000	Who want to share their immense wealth, uh, with you.
449000	450000	Right.
450000	454000	Only if you provide a small amount of information on your bank account where they need to transfer.
454000	459000	Uh, but you've got prizes and giveaway job opportunities and banking, right?
459000	465000	The banking spams are typically the ones you've seen where, uh, we identify the problem with
465000	466000	your account.
466000	469000	Please immediately call this number.
469000	475000	Or please click on this link to confirm, uh, your data, right?
475000	477000	Or change your password.
477000	478000	Okay.
478000	482000	Um, and this goes, actually, that's a separate category.
482000	484000	Request to change your password after your account.
484000	486000	Then software download, right?
486000	491000	I mean, uh, you have, we have a new release of, uh, an XYZ package.
491000	494000	Uh, we see you're using it and enjoying it.
494000	500000	Please download the free, uh, the next beautiful version of that package.
500000	501000	Oh, my gambling.
501000	502000	Haven't seen that much.
502000	504000	I'm surprised it's 20%.
504000	505000	Adult content.
505000	509000	That used to be a lot more, a lot more.
509000	516000	Like 10 years ago, I would say half of the spam was porn or porn related.
516000	518000	Now it's, it's down.
518000	522000	There's probably a good, like social science explanation.
522000	523000	Cryptocurrency scams.
523000	524000	Are they out there?
524000	526000	Not a huge amount, but they're out there.
526000	527000	I see, I see spam.
527000	530000	I see spam with cryptocurrency.
530000	537000	Uh, especially, these are especially on WhatsApp and text.
537000	539000	Not so much by email.
539000	541000	And then all kinds of stuff.
541000	544000	Pharmaceuticals also used to be a huge thing, right?
544000	545000	Huge.
545000	547000	Uh, like 15 years ago.
547000	549000	Pharmaceuticals scams.
549000	550000	The usual.
550000	556000	Viagra, Cialis, boldness cures, weight loss.
556000	564000	Between those three, like lose weight fast, performance, sexual performance enhancements,
564000	566000	and hair.
566000	567000	Sometimes it was loose hair.
567000	568000	Yeah.
568000	569000	Usually it was like regrow hair fast, right?
569000	570000	So these three dominated.
570000	571000	Now they're very small.
571000	572000	I'm surprised.
572000	573000	And then, uh, okay.
573000	574000	Romance scams.
574000	575000	That's more like, that's a niche.
575000	576000	That's not in this country so much.
576000	577000	That's, that's outside.
577000	578000	And now let's not confuse the dating app scams, right?
578000	579000	That's a whole different.
579000	580000	I'm not, I'm ruling those out here.
580000	597000	You know, these dating apps where they have bots and, uh, uh, that's a whole different
597000	598000	Okay.
598000	603000	Uh, here's some more numbers for you.
603000	607000	About 160 billion spam emails are sending it.
607000	608000	Billion!
608000	609000	Billion, right?
609000	610000	This price.
610000	611000	We have what?
611000	612000	4 billion people?
612000	613000	5 billion people on this earth?
613000	616000	There's not many emails are sent every freaking day.
616000	623000	Um, and that's good part of the 350 billion emails overall set.
623000	627000	Uh, most people receive spam messages.
627000	631000	The problem is what, so how does spam work?
631000	636000	Uh, how, how do spammers harvest email addresses?
636000	639000	Well, the most obvious like they crawl, right?
639000	643000	They crawl the web and they look for email addresses.
643000	648000	And all these tricks that people used to do and still do with like, uh, you know, not
648000	652000	using the add sign, but say add or something, right?
652000	655000	Or, oh, it's my name at blah, blah, blah.
655000	660000	Those don't work because these, these crawlers can convert us into email address.
660000	663000	Sometimes the email address is a guest.
663000	669000	Like smith at yahoo.com is going to be an email address, right?
669000	671000	Joey at yahoo.com.
671000	675000	Uh, you know, uh, Gene Sudik at gmail.com.
675000	677000	Well, you need to know my last name, right?
677000	682000	But, but you know, more predictable last names and first names, any combinations that are
682000	683000	going to be existing email.
683000	685000	No, it doesn't take a rocket scientist.
685000	689000	Most of the spam of actual people who send spam don't do the crawling.
689000	696000	Crawling is done by whole other people system that then sells this harvested spam addresses
696000	697000	to the spam, right?
697000	698000	To the actual spam.
698000	700000	Also, they filter them.
700000	703000	So when they collect them, they actually test that they exist.
703000	704000	Right?
704000	708000	So you get this, what's called data clean in the database world.
708000	714000	So they clean the data and then they sell the giant, uh, collections of databases of existing,
714000	717000	uh, email addresses to those who actually want to send spam.
717000	725000	Uh, maybe it will surprise you that the US sends the most spam.
725000	729000	There is most spam originates inside the US.
729000	734000	It may have actually been crafted somewhere else, but the, the sender from the email point
734000	737000	of view is here in the United States.
737000	738000	Followed by China.
738000	741000	Uh, let's see.
741000	742000	Okay.
742000	744000	The rest of them are important.
744000	749000	Uh, financial.
749000	754000	Now, now this is some, because I was hoping we would have a lecture on phishing.
754000	758000	I'm not sure if we, at the speed we're going to have that.
758000	762000	Phishing and spam are like fraternal twins.
762000	763000	Okay.
763000	767000	Now, spam can be without phishing.
767000	772000	And if I draw a Venn diagram, there will be a giant overlap.
772000	774000	You know, everybody knows a Venn diagram, right?
774000	778000	Between spam and phishing, but they have distinct parts.
778000	783000	So, spam is a vehicle for phishing.
783000	784000	Often.
784000	785000	Not always.
785000	791000	Spam can be also selling, I don't know, pharmaceuticals, right?
791000	793000	Is that phishing?
793000	794000	No.
794000	799000	A lot of that stuff is like you want to buy, uh, Adderall.
799000	802000	Maybe because it's without prescription.
802000	805000	It may be illegal for you to do so.
805000	811000	But if you go to the website and enter your credit card, they won't steal it.
811000	814000	They will ship you Adderall, maybe.
814000	819000	Or if you want to, uh, I don't know, buy something else, right?
819000	821000	I mean, uh, a walk, what is it?
821000	822000	The typical one?
822000	823000	A walk-in bathtub.
823000	825000	Everybody knows what that is?
825000	829000	For some reason, there was a favorite subject of spam for a while.
829000	832000	That's for old people or people who are handicapped.
832000	838000	A walk-in bathtub is a bathtub that has a door that you don't have to, like, step in.
838000	839000	Yes?
839000	840000	You've seen those?
840000	841000	Ever?
841000	842000	No?
842000	843000	Ever seen spam on that?
843000	845000	Very popular stuff for a long time.
845000	850000	So, surely there is a walk-in bathtub you can buy, probably overpriced.
850000	851000	Okay?
851000	853000	So it's not phishing.
853000	855000	It's just selling crap.
855000	859000	It's the same idea that you get in the mailbox, right?
859000	863000	You get these useless things, if you ever check, like, actual mail, physical mail.
863000	867000	You get these useless advertisements, right, for stuff that you don't need most of the time.
867000	872000	A sail in some, you know, Nordstrom's rack or whatever.
872000	874000	That's physical spam.
874000	882000	And, you know, a walk-in bathtub or, I don't know, cheap solar batteries installed in three minutes.
882000	884000	That's also that kind of spam.
884000	885000	It's not phishing.
885000	890000	Phishing is what they want to extract something from you that is, like, very personal.
890000	891000	Like, credentials.
891000	892000	Right?
892000	893000	Okay.
893000	894000	Blah, blah, blah, blah, blah.
894000	895000	Oh, yeah.
895000	896000	Delivery services.
896000	897000	We have a package for you, right?
897000	898000	This is typical via text, right?
898000	899000	Typically SMS, right?
899000	901000	Because a lot of the delivery services, FedEx, DHL, right?
901000	902000	Amazon, right?
902000	903000	They use SMS.
903000	904000	Many do.
904000	911000	And so you get this unsolicited text from some special, like a four-six-digit number, right?
911000	913000	That's not really typically a real phone number.
913000	914000	And it says, we have a delivery.
914000	915000	It's waiting for you.
915000	916000	We just need you to confirm your credit card.
916000	917000	Details.
917000	918000	Maybe you won't find that surprising.
918000	923680	Men 65 and over received the most spam calls.
923680	924680	No.
924680	925680	No.
925680	926680	Not.
926680	927680	No.
927680	928680	No.
928680	929680	No.
929680	930680	No.
930680	931680	No, no.
931680	933680	No.
933680	934680	No, I'm not.
934680	936680	All right, I'm sorry.
936680	937680	Very.
937680	938680	Holy shit.
938680	939680	Oh.
939680	940680	No.
940680	941680	No.
941680	942680	No, no.
942680	950760	and men 18 to 34 the less the least
950760	957500	any explanation when you might think that's so
957500	965780	what happens at 65? usual retirement right?
965780	971160	yes but retirement right? so you have
971160	974400	idleness right? so you're a working man
974400	978160	you're a working person you don't have time to talk to spammers
978160	982080	right? or follow up on some email
982080	985240	you just ignore whatever you're retired
985240	987080	now all of a sudden you have a lot of time on your head
987080	991040	you're bored and you have money
991040	995720	yeah? you have money you save money you work all your life or whatever
995720	1001720	65 not that long maybe but so these are the most ripe
1001720	1004780	the most ripe soil for spammers
1004780	1009360	people with disposable income who are idle and bored
1009360	1015960	these people I mean crypto millionaires aside
1015960	1019360	right? these people have no money
1019360	1022360	and they have the attention span of a food flight
1022360	1028360	right? not a good target for spammers
1028360	1031420	these people also remember these are like boomers
1031420	1034420	here 65 and over are boomers
1034420	1037360	different generation more perhaps more trusting
1037360	1040360	a little more serious you know
1040360	1046360	these people roughly your age
1046360	1049420	I mean these are men mind you but I think women get fewer
1049420	1053420	but I don't know how to explain that
1053420	1055360	list not obvious questions
1055360	1057360	alright let's switch into something a little more technical
1057360	1065360	so email have you ever wondered what your email does when it leaves your hands when you click send?
1065360	1072420	was that covered in any networking courses? yes?
1072420	1074420	not here
1074420	1075420	thank you
1075420	1077420	not here
1077420	1078420	where?
1078420	1079420	I want to go there
1079420	1085420	yes I suppose it wasn't covered in networking courses here unfortunately
1085420	1087420	which it should be
1087420	1089420	so you are the sender
1089420	1091420	you have your
1091420	1095480	are you all like browser email users?
1095480	1098480	who is a non-browser email user?
1098480	1101480	anybody use an email front-end?
1101480	1103480	like an email program?
1103480	1104420	no
1104420	1105420	wow
1105420	1107480	sign of the times
1107480	1108540	okay
1108540	1112540	it's a little different in your case
1112540	1113540	because
1113540	1117540	you are essentially using a front-end
1117540	1119540	kind of a fake front-end
1119540	1121540	your client browser
1121540	1123540	to access your gmail
1123540	1124540	right?
1124540	1126540	anybody here non-gmail?
1126540	1132540	you seem almost hesitant
1132540	1135540	look at this monoculture
1135540	1137600	you are all gmail users
1137600	1140600	is that because UCI dictates it?
1140600	1143600	do you have any other non-gmail accounts?
1143600	1144600	yeah
1144600	1145600	yeah
1145600	1146600	okay
1146600	1150600	but you use the browser as well to access those
1150600	1152600	interesting
1152600	1155600	well I don't think the browser on mobile devices
1155600	1156600	no
1156600	1163600	on the mobile devices I guess you use your mail app right?
1163600	1165660	well that's essentially the same thing right?
1165660	1167660	everybody uses like an API phone
1167660	1168660	well no
1168660	1169660	that's a different thing
1169660	1170660	okay
1170660	1171660	so let's think about your mail app
1171660	1172660	like
1172660	1175660	do people use mail on phones?
1175660	1177660	do you all use mail on phones?
1177660	1178660	like that?
1178660	1179660	okay
1179660	1180660	so you have an app
1180660	1181660	right?
1181660	1182660	good
1182660	1183660	so now we can connect better
1183660	1185660	you click send
1185660	1186660	your app is that
1186660	1187660	is that box over here
1187660	1188660	right?
1188660	1189660	that's your app over there
1189660	1190660	in that box
1190660	1193720	it's a computer but it's really like in this case be your phone
1193720	1194720	and so it's a client
1194720	1196720	it's an email client
1196720	1197720	and
1197720	1199720	when you configured it
1199720	1201720	you had to put some stuff in there
1201720	1203720	do you remember?
1203720	1206720	like you have to say what is your outgoing server?
1206720	1208720	Nicole doing that?
1208720	1209720	no Nicole
1209720	1211720	oh they give you a profile?
1211720	1213720	it's just one of your most login
1213720	1218780	oh my god
1218780	1219780	oh my god
1219780	1220780	okay
1220780	1221780	so
1221780	1223780	with google
1223780	1224780	even if you are using gmail
1224780	1225780	with a client
1225780	1226780	it goes to
1226780	1227780	something called
1227780	1229780	smtp.something.something
1229780	1230780	which in this case
1230780	1233780	will be smtp.google.gmail
1233780	1234780	blah blah blah
1234780	1236780	and that's your relay
1236780	1238780	relay
1238780	1246840	now if your destination is in google world
1246840	1251840	that same mail relay is going to deliver it to the recipient
1251840	1253840	so you won't have this stage
1253840	1255840	this mail relay
1255840	1256840	if it's google
1256840	1258840	and your destination if you have it is google
1258840	1262840	it will just hand over to the recipient
1262840	1264840	actually it won't handle it
1264840	1266840	technically it just stores it
1266840	1272900	that some people either pop or imap server
1272900	1274900	but that's not interesting
1274900	1276900	but generally if you send email to some
1276900	1278900	let's say you have a friend in
1278900	1281900	I don't know American Samoa
1281900	1284900	and you send an email and they have an address with like
1284900	1286900	ending with S
1286900	1290900	I guess it would be ASA or something like that
1290900	1295900	it will be given to the mail relay
1295900	1299900	which is the outgoing server
1299900	1301900	and that server will figure out
1301900	1305900	what is the recipient's mail relay
1305900	1307900	okay
1307900	1310900	and it will hand over over the internet
1310900	1313900	generally this can actually be over the internet
1313900	1315900	and it will hand over the mail
1315900	1319900	and then it will get to the recipient
1319900	1321900	but that's a funny detail here
1321900	1323900	the recipient may have a separate server
1323900	1325900	where the mail is stored
1325900	1329900	that's usually what's called POP3 or IMAP
1329900	1331900	depending on how you configure it
1331900	1333900	mailbox
1333900	1334900	okay
1334900	1337900	so you actually fetch email from there
1337900	1339900	when you refresh
1339900	1341900	all right
1341900	1344900	but the important thing is to understand
1344900	1346900	is that this is not real time communication
1346900	1349900	remember I kept saying that email is stored forward
1349900	1351900	so like
1351900	1353900	if for example
1353900	1355900	this mail relay is down
1355900	1359900	this one will buffer your mail
1359900	1363900	you might even try a different mail relay
1363900	1369900	so that means it's kind of tolerant of delays
1369900	1371900	and failures
1371900	1373900	TCP is not right
1373900	1375900	so this is
1375900	1377900	if this was end to end TCP
1377900	1379900	it wouldn't work
1379900	1381900	but with mail relays because they are running
1381900	1383900	application layer right
1383900	1385900	yeah
1385900	1387900	setting up your own mail relay
1387900	1389900	you could in principle do that
1389900	1391900	you would have to get your own domain
1391900	1393900	probably for that
1393900	1395900	you can get a domain
1395900	1397900	you can buy one
1397900	1399900	you can set up your own mail relay
1399900	1401900	you can right now
1401900	1403900	let's say you are
1403900	1405900	you live in Irvine here
1405900	1407900	you are sort of stuck with COX
1407900	1409900	internet
1409900	1411900	you cannot set up your own mail relay
1411900	1413900	at least not easily
1413900	1415900	right
1415900	1417900	but if you buy your own domain
1417900	1419900	then you can
1419900	1421900	well I was saying
1421900	1423900	so if you set it up right
1423900	1425900	and then you are up to your own Gmail
1425900	1427900	and you are trying to send
1427900	1429900	if you set up your own mail relay
1429900	1431900	then it's a front end
1431900	1433900	so when you send mail
1433900	1435900	you would go for that relay
1435900	1437900	and then to Gmail
1437900	1439900	but if you are using the browser
1439900	1441900	it will still go directly to Google
1441900	1443900	your mail
1443900	1445900	your mail really will be irrelevant
1445900	1447900	you see because when you are using a browser
1447900	1449900	you are not using
1449900	1451900	you are not using the actual email
1451900	1453900	you are using like an interface
1453900	1455900	through the email
1455900	1457900	so it's like a storage forward component
1457900	1459900	can you like do a denial of service attack on the storage forward
1459900	1461900	like I assume there is only a limited amount of memory
1461900	1465900	generally mail relays have a lot of disk space
1465900	1467900	they don't keep those things in memory
1467900	1469900	they only keep them when they
1469900	1471900	if they try to send
1471900	1472900	if they cannot send
1472900	1473900	if the send does not succeed
1473900	1475900	they buffer on this
1475900	1477900	but you could presumably do like a malicious attack
1477900	1479900	you could make
1479900	1481900	but that will still
1481900	1483900	there is a limited amount of time
1483900	1484900	that it will try to retransmit
1484900	1485900	then it will delete
1485900	1487900	you will see mail undeliverable
1487900	1489900	how many of you have seen this?
1489900	1491900	undeliverable mail
1491900	1492900	that's an error message saying
1492900	1493900	he tried
1493900	1494900	he tried
1494900	1495900	and then he gave up
1495900	1496900	so
1496900	1498900	ok
1498900	1499900	ok
1499900	1500900	so
1500900	1501900	mail relay
1501900	1502900	forwards mail
1502900	1503900	to the next
1503900	1504900	hop
1504900	1505900	in principle
1505900	1506900	there could be more
1506900	1507900	most of the time
1507900	1508900	most of the time
1508900	1509900	today
1509900	1510900	you will have
1510900	1511900	at most
1511900	1513900	two mail relays
1513900	1515900	meaning you will have something like this
1515900	1518900	if you are sending mail
1518900	1519900	from
1519900	1520900	a domain
1520900	1522900	to a destination
1522900	1523900	in the same domain
1523900	1524900	you only have one relay
1524900	1526900	because that one relay relay
1526900	1527900	will deliver it right away
1527900	1528900	to the destination
1528900	1529900	does that make sense?
1536900	1537900	so
1537900	1540900	the way that email works
1540900	1541900	is governed by
1541900	1543900	a protocol called SMTP
1543900	1546900	simple mail transfer protocol
1546900	1549900	not extremely simple
1549900	1550900	but not too complicated
1550900	1551900	ok
1551900	1552900	not like TCP
1552900	1554900	but it is a protocol
1554900	1555900	not a packet form
1555900	1556900	right
1556900	1557900	so
1557900	1558900	here you have
1558900	1559900	Bob
1559900	1560900	and Bob is
1560900	1561900	like
1561900	1562900	think of Bob as like
1562900	1563900	somebody writing an app
1563900	1564900	on their iphone
1564900	1565900	a mail app
1565900	1566900	or
1566900	1567900	like me
1567900	1568900	kind of Neanderthal
1568900	1569900	who has an email fronted
1569900	1570900	I run Thunderbird
1570900	1571900	so my email
1571900	1573900	is
1573900	1574900	is done by
1574900	1575900	Thunderbird
1575900	1576900	program
1576900	1577900	on my
1577900	1578900	laptop
1578900	1579900	so
1579900	1580900	I'm that guy
1580900	1581900	and
1581900	1582900	when I click send
1582900	1584900	SMTP
1584900	1585900	governs
1585900	1586900	how my
1586900	1587900	message
1587900	1588900	is transferred
1588900	1589900	to
1589900	1590900	my
1590900	1591900	nearest
1591900	1592900	outgoing
1592900	1593900	server
1593900	1594900	that is configured
1594900	1595900	in my profile
1595900	1596900	it is configured
1596900	1597900	in your profile
1597900	1599900	if you look into your mail app
1599900	1600900	on your iphone
1600900	1601900	or android
1601900	1602900	ok
1602900	1604900	you can actually see
1604900	1605900	what is the
1605900	1606900	address
1606900	1607900	the host name
1607900	1608900	of your outgoing
1608900	1609900	relay
1609900	1610900	this guy
1610900	1611900	this guy
1611900	1612900	here
1612900	1613900	it's
1613900	1614900	it's there
1614900	1615900	and then
1615900	1618900	so if the email goes to some organization
1618900	1619900	where Alice works
1619900	1621900	well that organization has its own
1621900	1623900	server or relay
1623900	1625900	and that
1625900	1626900	transfer
1626900	1627900	between
1627900	1628900	relays
1628900	1629900	or between servers
1629900	1630900	I use server and relay
1630900	1631900	interchangeably
1631900	1633900	is also governed by SMTP
1633900	1634900	ok
1634900	1635900	but it's
1635900	1636900	hop
1636900	1637900	by
1637900	1638900	hop
1638900	1639900	not end to end
1639900	1640900	hop
1640900	1641900	by hop
1641900	1642900	and then here
1642900	1643900	between
1643900	1645900	Alice's mail server
1645900	1646900	and actual recipient
1646900	1648900	there's something called
1648900	1649900	there's several
1649900	1650900	protocols for fetching
1650900	1653900	actually fetching email
1653900	1654900	because
1654900	1655900	what email does
1655900	1656900	is SMTP
1656900	1657900	delivers it
1657900	1658900	to the last pop
1658900	1660900	but not to the client
1660900	1661900	not to the recipient
1661900	1663900	the recipient has to explicitly fetch
1663900	1665900	mail
1665900	1667900	and that's done by
1667900	1668900	several protocols
1668900	1669900	one
1669900	1670900	you know
1670900	1671900	pop three is one
1671900	1672900	and IMAP
1672900	1673900	is another
1673900	1674900	and there might be others
1674900	1675900	as well
1675900	1676900	but these are the two
1676900	1677900	the two most popular
1677900	1678900	pop
1678900	1679900	post office protocol
1679900	1682900	and IMAP
1682900	1683900	stands for
1683900	1684900	internet mail
1684900	1685900	and something
1685900	1687900	agent protocol
1687900	1688900	or something like that
1688900	1690900	but we won't be talking about those
1690900	1691900	those are not very interesting
1691900	1693900	the most interesting part is
1693900	1694900	this
1694900	1695900	this
1698900	1699900	there are two
1699900	1700900	ports
1700900	1701900	and I'm gonna tell you a bit about SMTP
1701900	1702900	because I figured you never heard
1702900	1703900	how it works
1703900	1704900	alright
1704900	1705900	it actually
1705900	1706900	it's a little confusing
1706900	1707900	because it works
1707900	1709900	it works with two different ports
1709900	1711900	remember port socket
1711900	1714900	port
1714900	1715900	port 25
1715900	1717900	is a standard email port
1717900	1720900	it's been around since 1982
1720900	1721900	and
1721900	1722900	right around
1722900	1725900	very soon after IP and TCP were first proposed
1725900	1730900	it is beloved by spammers
1730900	1732900	because it is insecure
1732900	1735900	so the port 25
1735900	1738900	is essentially supporting what's called open relay
1738900	1740900	which I'll tell you about in a minute
1740900	1743900	it is supported by
1743900	1745900	it shouldn't be used
1745900	1748900	by your email front end
1748900	1750900	so your app for example
1750900	1752900	if you look at your email app
1752900	1755900	and the configuration of your email app
1755900	1758900	one of the things it will tell you there
1758900	1760900	is what protocol to use
1760900	1762900	maybe you have
1762900	1763900	you've tried to add an email account
1763900	1764900	to your email app
1764900	1765900	has anybody done this?
1765900	1767900	add an account
1767900	1769900	does it ask you a set of questions?
1769900	1770900	mine does
1770900	1773900	but that's because mine isn't set up in the standard way
1773900	1775900	but in my experience
1775900	1777900	all of them ask you questions
1777900	1778900	yeah
1778900	1779900	like you say
1779900	1780900	what is your username
1780900	1781900	right
1781900	1782900	what is your email provider
1782900	1783900	right
1783900	1784900	what is your username
1784900	1785900	it asks you password
1785900	1786900	right
1786900	1788900	then it asks you also like
1788900	1790900	what protocol
1790900	1792900	and that will give you choices
1792900	1793900	ok
1793900	1794900	so
1794900	1796900	25 is one choice
1796900	1798900	it might not be supported
1798900	1799900	and for good reason
1799900	1801900	because it's not secure
1801900	1803900	ISPs
1803900	1804900	right
1804900	1806900	the cloud hosting provider will often block it
1806900	1808900	what is it actually used for?
1808900	1810900	it is used for
1810900	1814900	this
1814900	1818900	relay to relay
1818900	1820900	server to server
1822900	1823900	originally
1823900	1825900	everybody used port 25
1825900	1827900	for like several decades
1827900	1829900	and then when spam became a problem
1829900	1831900	they introduced port 587
1831900	1833900	and that's the one you're more likely to see
1833900	1835900	587
1835900	1837900	when you configure your email
1837900	1838900	you know
1838900	1839900	even if it's done automatically
1839900	1840900	you can see it
1840900	1841900	in the configuration
1841900	1842900	okay
1842900	1844900	there's an internet rc
1844900	1845900	that's discussed
1845900	1846900	it has
1846900	1847900	what's called
1847900	1848900	a start
1848900	1850900	TLS option
1850900	1852900	it's not
1852900	1853900	it's an option
1853900	1854900	it's not a requirement
1854900	1856900	but when you use that option
1856900	1857900	your email
1857900	1858900	is transferred
1858900	1859900	over a
1859900	1860900	TLS connection
1860900	1863900	and that is primarily
1863900	1865900	for this
1865900	1868900	from your app
1868900	1870900	to the outgoing server
1870900	1871900	or from your front end
1871900	1872900	of your laptop
1872900	1873900	to the outgoing server
1873900	1874900	okay
1874900	1877900	it's a little bit confusing
1877900	1878900	but that's how it works
1878900	1880900	so
1880900	1883900	there are a lot of
1883900	1884900	what's called open relays
1884900	1885900	out there
1885900	1886900	meaning relays
1886900	1887900	that do not require you
1887900	1888900	to have an account
1888900	1889900	to establish a secure connection
1889900	1891900	they exist for various reasons
1891900	1895900	sometimes they exist because
1895900	1896900	you know
1896900	1898900	operators of those relays
1898900	1899900	get money
1899900	1900900	from spammers
1900900	1901900	and other businesses
1901900	1903900	sometimes they exist because
1903900	1904900	people who configure them
1904900	1906900	and set them up
1906900	1907900	believe in
1907900	1909900	freedom of speech
1909900	1911900	they just don't allow
1911900	1913900	anybody to send email
1913900	1914900	through them
1914900	1915900	okay
1915900	1916900	now
1916900	1918900	what does an open relay do
1918900	1920900	or what does a relay in general do
1920900	1922900	it is
1922900	1923900	processing
1923900	1924900	so it receives an email
1924900	1925900	from the previous
1925900	1926900	haha
1926900	1928900	it looks at the header
1928900	1931900	and it looks to where does it need to go
1931900	1932900	right
1932900	1933900	what is the destination
1933900	1934900	like alice
1934900	1937900	abc.com.au
1937900	1939900	which means
1939900	1941900	the company named ABC
1941900	1942900	AU is in Australia
1942900	1944900	so it needs to go to Australia
1946900	1947900	and so
1947900	1948900	it finds out
1948900	1949900	what should be the next relay
1949900	1950900	topic
1950900	1951900	maybe
1951900	1952900	smtp.abc.com.au
1952900	1953900	maybe
1953900	1956900	smtp.abc.com.au
1956900	1959900	let's say that's the next email
1959900	1962900	it establishes a TCP connection
1962900	1965900	and then via smtp transfers the message over
1965900	1969900	but as it transfers the message over
1969900	1970900	it adds
1970900	1971900	it adds
1971900	1973900	a received from
1973900	1974900	a line
1974900	1975900	okay
1975900	1980900	into the header field
1980900	1985900	and maybe if you looked at the actual raw email
1985900	1987900	you might have looked at the raw email message
1987900	1988900	in plain text
1988900	1994900	have you seen that it has several usually several lines that say received
1994900	2000900	that is essentially the path that your email took to get to you
2000900	2001900	okay
2001900	2007900	that tells you exactly the sequence of relays that it traversed in order to get to you
2007900	2013900	and an honest relay according to the scientific protocol needs to add itself to the received
2013900	2014900	right
2014900	2019900	so the header grows as an email hops around the internet the header grows never shrinks
2020900	2023900	so when you receive it you actually see the exact route it took
2023900	2027900	not IP route not IP route but a mail route
2027900	2034900	now if the relay is hacked or it's malicious it doesn't have to do this
2034900	2036900	it doesn't have to abide by the protocol
2036900	2040900	and that's why for example spam may be very confusing
2040900	2044900	you might not exactly see the hops it took
2044900	2049900	especially typical thing is that the spammer has a
2049900	2052900	as the first hop a malicious relay
2052900	2056900	that does not add its name or adds some incorrect name
2056900	2058900	and why to confuse you
2058900	2063900	so you don't know where the intel actually comes from
2063900	2070900	SMTP will not surprise you
2070900	2073900	does not have any built-in authentication
2073900	2075900	no built-in security whatsoever
2075900	2076900	okay
2076900	2077900	like IP
2077900	2078900	like TCP
2078900	2080900	it was an internet program
2080900	2083900	one of those protocols designed in a different at a different time
2083900	2084900	right
2084900	2085900	50 years ago
2085900	2087900	when things were very very different
2091900	2092900	let's see
2092900	2093900	mail from
2093900	2094900	right
2094900	2095900	you've seen it
2095900	2096900	right
2096900	2097900	if you look at the raw text email
2097900	2099900	mail from is supposed to be where it actually comes from
2099900	2100900	right
2100900	2101900	bob
2101900	2104900	xyz.com.ca
2104900	2105900	which would be
2105900	2107900	company xyz in Canada
2107900	2108900	okay
2108900	2109900	but
2109900	2110900	can you trust it
2110900	2112900	no
2112900	2113900	of course not
2113900	2114900	I
2114900	2115900	just
2115900	2116900	it's like the sender
2116900	2117900	sender can put anything you want
2117900	2118900	who wants to put
2118900	2119900	you know
2119900	2121900	moron.trump
2121900	2122900	and whitehouse.com
2122900	2123900	go ahead
2123900	2128900	chancellor gilman
2128900	2130900	fbci.edi
2130900	2131900	whatever
2131900	2132900	he can do it
2132900	2133900	so
2133900	2135900	and then the recipient
2135900	2136900	right
2136900	2137900	only sees the IP address
2137900	2138900	of the direct peer
2138900	2139900	meaning that
2139900	2140900	the last hop
2140900	2141900	from which
2141900	2142900	so the only thing you can trust
2142900	2144900	is that of the IP address of the last hop
2144900	2145900	from the email
2145900	2146900	that's it
2146900	2147900	of their relay
2147900	2152900	so here's the language of India
2152900	2154900	this is what actually happens
2154900	2155900	right
2155900	2156900	between
2156900	2157900	a sending mail server
2157900	2158900	like on a client
2158900	2161900	so this is in case of your app
2161900	2162900	your mail app
2162900	2163900	on your app
2163900	2164900	on your phone
2164900	2165900	and the first
2165900	2167900	mail server
2170900	2171900	first it says
2171900	2172900	some people
2172900	2173900	hello
2173900	2174900	right
2174900	2175900	so this is on port 25
2175900	2176900	port 25
2176900	2177900	in a
2177900	2178900	in a
2178900	2179900	in a
2179900	2180900	in a
2180900	2181900	in a
2181900	2182900	in a
2182900	2183900	sorry
2183900	2184900	let me
2184900	2185900	let me take that
2185900	2186900	sorry
2186900	2187900	this is between two relays
2187900	2188900	not between your client
2188900	2189900	not between your email client
2189900	2190900	on your app
2190900	2191900	but rather
2191900	2192900	between two relays
2192900	2193900	the sending relay
2193900	2194900	and the receiving relay
2194900	2195900	okay
2195900	2196900	so this is using
2196900	2197900	port 25
2197900	2198900	because that's allowed
2198900	2199900	between
2199900	2200900	email servers
2200900	2201900	hi there i want to send you email
2201900	2202900	so it says
2202900	2203900	this is not after TCP connection
2203900	2204900	is established
2204900	2205900	i don't show it
2205900	2206900	here
2206900	2207900	then it says to some people
2207900	2208900	hello
2208900	2209900	it's not going to spell it
2209900	2210900	that's how it is called
2210900	2211900	uh
2211900	2212900	and now the reply is
2212900	2213900	okay
2213900	2214900	i'm ready to receive email
2214900	2215900	from you
2215900	2216900	then it says
2216900	2217900	uh
2217900	2218900	the mail i'm about to send you
2218900	2219900	is from
2219900	2220900	uh
2220900	2221900	uh
2221900	2222900	hello
2222900	2225900	dot com
2225900	2226900	and uh
2226900	2230900	what the receiving mail server is supposed to do is look at that address and say
2230900	2237900	do i want to do i trust this address do i want to forward email that came from this address
2237900	2238900	right
2238900	2239900	right
2239900	2240900	and generally
2240900	2241900	i mean unless it
2241900	2266900	so you can have a blacklist for example it can consult some spam address database or it can have its own configuration it says okay good 250 means okay here is where it's going to then the sending server says it's going to mary at sweet tooth dot com the receiving server says okay let me check that address do i know where that is
2266900	2268900	what that is
2268900	2269900	do i like this address
2269900	2270900	is it
2270900	2271900	is that a
2271900	2272900	suspicious address
2272900	2274900	maybe it's a non-existent address
2274900	2279900	if it's fine it says yeah looks good 250 okay
2279900	2280900	and then
2280900	2281900	this
2281900	2282900	this
2282900	2283900	here
2283900	2284900	is a data transfer
2284900	2285900	right
2285900	2287900	actually it's one line at a time
2287900	2288900	text
2288900	2289900	bam
2289900	2290900	bam
2290900	2291900	bam
2291900	2292900	the last message
2292900	2293900	is a dot
2293900	2296900	a one line with just a period
2296900	2298900	that signifies end of message
2298900	2299900	i know
2299900	2300900	weird
2300900	2301900	so
2301900	2302900	when you said
2302900	2305900	if you were to insert in your mail a period
2305900	2308900	like when you type when you type out in your email
2308900	2311900	if you insert a period on by itself on a line
2311900	2312900	it's masked
2312900	2319900	so that otherwise writing would be misinterpreted as the end of email so it is masked with a slash i think or something like that
2319900	2320900	so
2320900	2324900	it has to be like one period on a line that says okay we're done
2324900	2332900	at this point we're done then there's a quit command and then they acknowledge that this is kind of an error message but it means i acknowledge we're done
2332900	2333900	yeah
2333900	2338900	is there any particular reason it has to be six back and forth or is it just the first thing they thought
2338900	2339900	uh
2339900	2340900	uh
2340900	2341900	uh
2341900	2342900	good question i don't know
2342900	2345900	clearly this could be done differently right
2345900	2348900	but that's that's how they're that's how the purple works
2348900	2355900	you mean these hello okay mail from okay but uh yeah i mean of course you could you could imagine um
2355900	2360900	hello is not just okay we're talking this is the beginning of the email of SMTP
2360900	2366900	right because TCP is is below it's already established but above it is SMTP protocol right
2366900	2376900	so the first two exchanges are they need to be there right just to say we are i i speak SMTP you speak SMTP
2376900	2385900	the second two exchanges like mail from okay recipient to okay those could be combined indeed
2385900	2392900	i don't see a reason why they're separate but that's just historically how it works
2392900	2397900	so it looks more complicated than it is right it's not that difficult
2397900	2405900	now this is how port 557 works this is also SMTP protocol but this is between your email client on your
2405900	2411900	the app on your phone or a front end on your laptop and the outgoing server that's supposed to be more secure
2411900	2423900	so uh instead of hello it's hello which means extended hello why because it's more sophisticated
2423900	2433900	okay mail from same as before okay bob looks okay then sending to alice yahoo.com okay check that is okay
2433900	2443900	then send data all right every piece of data is line by line until you see a period period is the end
2443900	2452900	quit blah blah blah right so it's very very similar except that if you wanted to secure it you could do it
2452900	2460900	you could do it you could use a tls option that's called a start tls this is a version that would use start tls
2460900	2468900	tcp handshake i showed you here but the beginning then there's really hello 250 means okay and then
2468900	2476900	then the receiving email server adds an option count saying start tls it means i support tls
2476900	2486900	tls the email client acknowledges 2.8 means go ahead and then there's a tls negotiation there's actually a tls session
2486900	2500900	set up here okay and that email is sent over that tls and chances are in new york now stock tls is due
2500900	2506900	i can definitely see when i configure a new email account one of the options is pick start tls and
2506900	2512900	sometimes your email provider if you don't pick it will not will refuse to work because they say no no no
2512900	2522900	i want you to use start tls make sure the email is secure now the typical header fields in an email i can
2522900	2528900	attach that you probably see are like these this is not there are more there could be a lot of extended maybe
2528900	2534260	you see a lot of fields there called x dot dash have you seen if you look at the email remember
2534260	2540900	the same thing feels like s dash that's extended optional fields but the required fields are these
2540900	2549700	two to whom is this email this is one or more destinations carbon copy right who is copying on
2549700	2558100	these emails and then blind carbon copy okay everyone knows what dcc is what's the stupidest thing anybody can
2558100	2569460	have a doubt do with bcc have you ever received email by bcc i've never replied to an email by bcc
2570260	2571540	that's the stupidest thing you can do
2574020	2580900	does everybody see what i'm saying if you receive a mail by a bcc you use your address is in bcc that
2580900	2586260	means everybody else does not see your email as one of the recipients you are a hidden recipient
2588020	2589380	but if you do reply all
2591540	2597300	everybody will see that yeah you got that email and you weren't on the address list
2597300	2606180	you must have been bcc so don't do reply all if you're a bcc on email okay bcc then from who created
2606180	2611300	this email the email address usually with a name sometimes with a name not always with a name right
2613380	2613780	sender
2616180	2622340	usually the same receive okay this is where you have one or more lines of the path
2623540	2629460	right in this case just that is line added by each trip but it uses the word transfer agent but the
2629460	2637300	sftp relay or server to show you the hops it went through return path right path back to the center
2641700	2645220	let's look at this mail plain text
2647460	2655780	received by received by so return path received received
2655780	2662900	spf we'll talk about this message id from to subject
2666820	2670260	okay you see the first receive gives you an ip address
2672980	2676180	that was done 12 in a time stamp the second says
2679220	2683540	received actually the same time stamp is possible because the time stamp is in seconds so
2683540	2690260	uh it is quite possible pacific standard of time uh sftp id is a typically a
2691060	2696020	hash of the message some kind of hash that can be assigned every email server can use its own
2696020	2702260	heuristic to assign it but the ip addresses are supposed to be legitimate ip addresses
2704260	2706820	return path some email address
2706820	2718500	uh spf is called the center policy framework we'll talk about it it's basically a um
2720980	2728740	this distinction between trusted and untrusted uh sources at the particle uh okay and then there is the
2728740	2736500	person presumably who sent this email uh it generally should match return path you see return
2736500	2739380	path path and and the front should match
2741860	2745700	this is the destination so the victim here is this person
2752660	2759300	so this stuff is inserted by relays all of that
2759300	2772820	this one link pr is a isp in puerto rico okay
2775380	2781700	it claims to have and you see what's there in a uh parenthesis in the brackets is an ip address
2781700	2786340	it's supposed to correspond right so the one link pr.net is supposed to correspond to that address
2787060	2790260	actually that is somewhere in mongolia
2791940	2795540	how do you know if you ping right if you trace your output it's in mongolia
2797140	2801780	so already we have that's the spam which means it's an artificially crafted
2801780	2804340	uh message
2808820	2815540	one in the game of bingo so why do spam spammers want to hide their sources
2817540	2821140	right so there is this fundamental thing right when you get spam
2822980	2827140	it obviously wants you to do something right if you fall for it it wants you to take an action
2827140	2836180	like buy viagra or walk in bathtub or you know order some i don't know some crap on the internet
2836180	2842980	right i mean it sends you somewhere right it's not a spam saying it's usually not like oh i don't know
2842980	2851620	vote for uh candidate this you get the spam around election time right but um that's different so
2851620	2855620	typically it wants you to do something so why if they want you to do something
2856340	2866260	meaning go to some website or reply then why would they hide their sources you see the problem
2870500	2880660	they hide their sources not so much from you the recipient but from your provider your isp and others who want to kill spam
2880660	2889460	you see the distinction they don't really care so much that you know where it comes from they don't want
2889460	2893380	others to know so they can't be blacklisted what was your question
2893380	2906660	that's true that's true but typically you say you think right intuitively that oh you know it's the
2907380	2914020	some even it's either that seller or the agent of the seller that's advertising this product right that
2914020	2920100	that they're trying to get me to buy there should be a connection but that doesn't have to be right
2920100	2927620	the seller for example could be in a place where they they you know in some other country
2928500	2934420	and their email address might be filtered by policy like so what they do is they say you can
2934420	2940740	contract the spammer in the united states they send the spammer a template i want you to
2940740	2951060	to send to this 10 million addresses this type of message that says dear so and so i am god knows who
2951780	2960580	a nigerian prince recently deceased with a lot of money to give away right but the idea is that okay
2960580	2965460	if it comes from nigeria right if you see the head of nigeria it would be it would be thrown away but
2965460	2973300	if it comes from the us source it won't be right if it's a us isp so that's the reason
2975220	2980900	now of course spam filters they they do check the bodies of messages so you you you have these various
2980900	2986260	like uh sophos and spam assassin and you might sometimes get from uci write these messages saying
2986260	2991620	that we quarantine some messages right have you seen those you have to like to get them you have to
2991620	2997940	clicks that go to some link and you know click that's true but spammers are really good at like
2997940	3004340	evading them that's a whole separate subject right how do they evade spam filters because spam filters
3004340	3010180	basically you know use some heuristics of ai but you know anything that they do can be circumvented if
3010180	3014180	they know if you know the algorithms anyway
3014180	3023700	there are these clearing houses i think they're still around spam houses spam spam cop dot net these
3023700	3030420	are non-profits that you maintain giant data banks of uh spam addresses right there's spam providers
3030420	3038820	spam relays um these and this is where your relays these are the typical databases that your mail relays
3038820	3043860	will consult in you know as they try to deliver emails and so they will stop like between 15 and
3043860	3052900	40 percent of spam but majority of spam still gets through okay uh the other problem is that by the
3052900	3057540	time they check the bandwidth is already consumed right so the email can email consumes a lot of
3057540	3065700	bandwidth as you can imagine especially if you have uh html inside email right or or some other markups
3065700	3072020	right now you have s- does everybody know the s- is secure multimedia mail extension this is when you
3072020	3078020	you receive email that is like signed or you know it has multiple parts and so on these these are giant
3078020	3084500	or can be quite large uh messages not the typical text email that you get and so that if spammers use
3084500	3093220	that it's very difficult um to prevent them from consuming bandwidth so for evading plot tests sorry for evading
3093220	3100260	for evading for evading blacklists with blacklists typically don't say oh filter everything with the word
3100260	3111540	viagra or anything with the word uh bathtub no they typically list uh ip addresses and host names of known spammers
3111540	3123780	so one time trial and very effective trick that spammers use is called thin pipe thick pipe
3125860	3132100	and it works like this so you have a target server let's say that serves uh let's say a particular company
3132100	3141220	let's say uci ready right so this is our uh sftp server and the spammer wants to send a lot of spam to
3141220	3155540	uci uh people like us okay so the spammer controls a botnet a botnet is full of zombies okay zombie botnet
3157060	3164820	lsz stands for low speed zombie so this could be like one of your desktop computers in your lab or
3164820	3171220	you know it could be a an old laptop that you have at home some would be even an iot device
3173780	3181460	then the high speed bot is somewhere else this is geographically far away not near anywhere near the
3181460	3188180	low speed zone low speed zombies are many there are thousands maybe tens and thousands of them so
3188180	3198100	so the bot picks a zombie and says hey do a tcp handshake with that server right open smtp connection
3202020	3207380	then pass on the tcp sequence numbers remember tcp sequence numbers offset
3207380	3222900	to this high speed bar you might be getting where what i'm about to say bam send bulk mail with a source
3223620	3224420	low speed zone
3226900	3233860	remember ip addresses are not a form of authentication so so the high speed bot takes over the tcp session
3233860	3241860	you see what's happening here this session was initiated by a low speed zombie as soon as the
3241860	3249300	three-way tcp connection is established it passes on the sequence number to its big brother here
3250180	3256660	the big brother says all right and sends a lot of spam over to the target server
3257460	3263300	a target server thinks that this craft comes over on that connection you see
3266260	3268580	cool what happens
3272100	3280820	the high speed zombies ip address is hidden from the target server because what will happen
3280820	3289060	okay remember how tcp works right it's all acknowledgement right data acknowledgement data
3289060	3296100	acknowledgement and data can flow both ways but in email right in email what's happening is one relay
3296100	3302660	has mailed message to send the other one is the receiver so the receiver does not send big data back
3302660	3311700	right there's no messages to send back it's the sender that sends the message so the sender splits the
3311700	3316740	message into chunks remember like tcp segments right because that should be long the email message can be
3316740	3322900	long and it sends them with this via this tick line
3322900	3332820	with the ip address of the low speed zombie now that that target victim server is going to do
3332820	3337940	acknowledgments remember tcp acknowledgments they're not going to come on the thick pipe
3339780	3345140	do you see why they cannot right because the acknowledgments will go to the ip address of the
3345140	3349300	low speed zombie we don't assume that these guys are controlling internet routing
3350020	3355940	so that this guy cannot force the tcp acknowledgments from this target server to come to it
3357060	3357620	he cannot
3359940	3363860	they will come here and that's okay they're in cahoots with each other
3365540	3365780	so
3368980	3375220	he's going to keep passing the offset now low bandwidth and this is a low bandwidth channel right low bandwidth
3375220	3383780	the bulk of the data gets transmitted here it's a beautiful arrangement and it works now
3383780	3390660	eventually the target the cdp server will say hey this is spam right somebody will mark it as spam
3391700	3396740	and you'll say oh when did i receive it i received an ip address belonging to the low speed zombie
3396740	3405540	okay let's left list the zombie done no more email from that a b address is accepted that's okay
3408740	3417140	the high-speed bot goes on to the next zombie because he has thousands okay that other zombie that's done
3417140	3421620	barrier that g you get the idea
3425380	3432260	there are seven like amazing front-end tools for sending spam this is like one a bit old but it's an
3432260	3441460	example this is a sensei program for windows it's a it's a spam automator you can configure it
3441460	3451220	to send you see that it it from emails you can consider you can configure it to be like administrator
3451220	3463140	at uciadu president usa.gov uh god at heaven dot earth whatever you want you can put it in the from
3463140	3470580	uh you see the two aliases right this is to whom is this supposed to go webmaster administrator database
3471140	3478660	okay you can vary all of these things subjects you see the subjects vary the subjects right hi hello
3478660	3484340	how are you doing montano c etc okay and here's the actual middle text
3486500	3493060	it's marked up dear black right so the name will go in there meaning the name two
3494020	3500980	dear webmaster we'll go in there or or you see there's like a you don't want right here there's a
3500980	3508180	or there is an or or dear colleague don't even need to like specifically address the person or
3508980	3517220	hi account this is the typical way to identify when you see when you know it says hi john at uciadu
3517220	3528820	have you ever received non-spam that says hi john at uciadu or or anything any greeting followed by your
3528820	3536340	account name obviously that person does not know your name right so that's like a 99.99 indicator of
3536340	3542180	spam when somebody refers to you by your account name but i guess people fall for it sometimes
3543060	3544900	but it's a very nice automator
3548260	3554900	all right uh if you're wondering where you know where the open proxies are that you can actually
3554900	3562740	spend uh spam through well there's whole clearing houses of these of these proxies that you can what
3562740	3569700	does it mean you can go there find a proxy that is alive and configure that proxy to be your outgoing
3569700	3576260	smtp server so when you send email instead of going to google right or instead of going to uci
3576980	3584500	uh smtp edu it will go to that open proxy okay so you can set this down through
3586980	3592420	blacklisting turns out not to be enough because most ip addresses just like in a thin type
3592420	3596340	thick type example with a low speed zombie most ip addresses send very little standards
3597220	3603060	so blacklisting that's why is is very limited uh effectiveness because you blacklist something
3603060	3606420	and it will never spend some time again anyway by the time you blacklist it it's too late
3609860	3614820	right what does it show you it's a fraction of clients that says crap in number of appearances
3615700	3619060	it means most of them said like once and then they go away
3619060	3629700	okay because they're disposable where they come from well this is a while ago okay this is uh this
3629700	3635300	is a this is a this is a while ago but at the time this is like almost 20 years ago these were i
3636260	3642980	see the as number these are the organizations where spam originally it doesn't mean they spend spam it means
3642980	3644420	their clients sent spam
3649380	3652900	the the picture would be very different today i already said that
3660100	3670980	ah this was around 2010 2012 the world was ruled by uh what like half a thousand giant spam bots
3673140	3681940	yeah that was the world back then two particular had the lion's share swisbee and rostock they dominated
3681940	3688980	the world of spam they were not themselves creators of spam they were the engines of spam do you see what i'm
3688980	3697060	saying they were sending spam they were not creating it they were taking it from their clients and amplifying it
3703140	3706900	most of them used a provider in northern california nisp
3707940	3715700	okay that was uh very happy making money on them right uh it was not a bot but it had all these
3715700	3722020	clients right it hosted these command and control servers command and control server is the brain of a bot
3722020	3731540	right as the word name suggests command and control and so both rostock and frisbee were hosted right
3731540	3737940	there by this isp now you all know what the difference between hosting provider and isp
3738740	3744180	there's very they're similar but not the same you know the difference what's the difference what's the
3744180	3750660	difference what's the difference between a hosting provider and isp uh a hosting provider is like
3752420	3756020	so an isp provides the internet service and that's it pretty much yeah
3757220	3763860	a hosting a hosting doesn't provide internet service it provides like yeah it usually does i mean
3764740	3771460	yes true technically no usually does but but its primary purpose is to let you put your stuff on there
3771460	3778340	exactly so you can put your web server yeah on a hosting provider okay a world world press is a
3778340	3783860	hosting provider right like that google is a hosting provider uh but uh you're also tiny
3784500	3790820	this was a relatively small one but it hosted all this now when it was disconnected imagine this three
3790820	3798980	quarters of the spam in the world disappeared overnight that was incredible i remember it because uh
3799780	3803780	all of a sudden i heard of it like two days later i realized i used to receive a lot of spam i went
3803780	3813780	to my phone for the first time in 10 years there was no spam um now swisbee was it was an interesting
3813780	3819860	character it was a rookie and a mailer right so basically it was a combination of malware and spam
3820660	3826100	in order to have a a botnet you need to have zombies and you have zombies you must have malware they
3826100	3831380	created those zombies and zombified them so there's always malware involved in creating a botnet
3831940	3835220	it was at one point responsible for more than half the spam worldwide
3836100	3841620	and when the mid-color uh hosting provider was taken down the zombies did not disappear right they
3841620	3848100	still lived it's like you decapitate the head of the snake but the rest of it is still moving
3848100	3856340	so the zombies were motherless all of a sudden right the mother ship has gone away but whoever created
3856340	3863060	that botnet was pretty smart and they wanted to essentially for the zombies to look for a different
3863060	3868820	mother or a different command and control center and they were programmed to do so and they started
3868820	3874740	generating backup domains like this like weird looking backup domains and trying to connect to them
3874740	3883460	thinking where's my mother where's my mother right and sure enough the people who were behind this
3883460	3891220	botnet created for you know regain control of the zombies by creating a backup mother uh not surprising
3891220	3896340	through a registrar registrar is the assigned name authority that uh assigns domain names in a given
3896340	3903460	country every country has one well they did it for a russian registrar and hosted new commanding control
3903460	3910260	service in estonia so all of a sudden that was like a phoenix from ashes the zombies like in a
3910260	3916580	movie they arose and found themselves a mother a new mother it was then disconnected and shut down but
3916580	3924260	it was an interesting state rust talk no no no okay we're right all right i just want to well the rest of
3924260	3930740	it i guess we'll see either we'll cover it next time or if i decide to switch to a different topic then
3930740	3936340	you'll just read it on your own the thing i want to point out is there are legal ways of uh encountering
3936340	3944420	spam there's a can spam act that u.s uh uh federal government was passed by the congress in 2003 there
3944420	3949620	is something called spf which i mentioned earlier that is a technical way of fighting spam and there
3949620	3955780	is something called the main themes maybe we'll talk about it a little bit next time all right any questions
3955780	3965540	before we go yes in practice uh if you're like a user of say gmail and someone else is using gmail would
3965540	3972420	they would gmail actually use the smtp protocol or would they just like use standard you know in the
3972420	3979220	google universe you don't even need smtp protocol unless you're using an app so from your app to google
3979220	3987700	google is smtp with a 587 right what he said and after that there's probably no really right it's
3987700	3992260	totally internal to google it's like you know if you have hotmail account it's the same you're sending
3992260	3998740	to another hotmail very very very similar yeah now when you start crossing domains right what he's saying
3998740	4005460	from gmail to hotmail then you are you're going to have this relay to relay okay okay so other than
4005460	4011700	uh sample final anything else okay see you thursday
4019860	4026900	hey uh did you say uh the final date is it on 10. sorry the final exam date did you say anything
4026900	4037540	uh it declared in canvas yes yes okay you can see it from the uh
